import{r as x,u as b,j as e,a as j,g as m,L as u,b as y}from"./index-89147f3e.js";import{A as g}from"./apexcharts.common-153f1302.js";import{T as N,P as v}from"./TableFilter-ff9fee1b.js";import{F as f,b as w}from"./tables-1eb894b7.js";import{C as h}from"./chart-fa93cbbd.js";function p({className:t,title:a,toolbar:i,data:o}){const r=x.useRef(null),{mode:n}=b(),s=()=>{if(!r.current)return;const l=parseInt(j(r.current,"height")),c=new g(r.current,k(o,l));return c&&c.render(),c};return x.useEffect(()=>{const l=s();return()=>{l&&l.destroy()}},[r,n]),e.jsxs("div",{className:`card ${t}`,children:[e.jsxs("div",{className:"card-header border-0 pt-5",children:[e.jsx("h3",{className:"card-title align-items-start flex-column",children:a}),e.jsx("div",{className:"card-toolbar","data-kt-buttons":"true",children:i})]}),e.jsx("div",{className:"card-body",children:e.jsx("div",{ref:r,id:"kt_charts_widget_5_chart",style:{height:"350px"}})})]})}function k(t,a){const i=m("--bs-gray-500"),o=m("--bs-gray-200"),r=m("--bs-success"),n=m("--bs-danger"),s=Object.keys(t),l=s.map(d=>t[d].profit),c=s.map(d=>-1*t[d].expenses);return{series:[{name:"Доходы",data:l},{name:"Расходы",data:c}],chart:{fontFamily:"inherit",type:"bar",stacked:!0,height:a,toolbar:{show:!1}},plotOptions:{bar:{horizontal:!1,columnWidth:"20px",borderRadius:5}},legend:{show:!0},dataLabels:{enabled:!1},stroke:{show:!0,width:2,colors:["transparent"]},xaxis:{categories:s,axisBorder:{show:!1},axisTicks:{show:!1},labels:{style:{colors:i,fontSize:"12px"}}},yaxis:{labels:{style:{colors:i,fontSize:"12px"}}},fill:{opacity:1},states:{normal:{filter:{type:"none",value:0}},hover:{filter:{type:"none",value:0}},active:{allowMultipleDataPointsSelection:!1,filter:{type:"none",value:0}}},tooltip:{style:{fontSize:"12px"},y:{formatter:function(d){return`${d} тг`}}},colors:[r,n],grid:{borderColor:o,strokeDashArray:4,yaxis:{lines:{show:!0}}}}}function C(t){const{className:a="",columns:i,data:o,title:r="",onRowClick:n}=t;return e.jsxs("div",{className:`card ${a} border-0 rounded-3`,children:[e.jsxs("div",{className:"card-header border-0 pt-5",children:[e.jsx("h3",{className:"card-title align-items-start flex-column",children:e.jsx("span",{className:"card-label fw-bold fs-3 mb-1",children:r})}),e.jsxs("div",{className:"card-toolbar",children:[e.jsxs("div",{className:"d-flex align-items-center position-relative me-4",children:[e.jsxs("i",{className:"ki-duotone ki-magnifier fs-3 position-absolute ms-3",children:[e.jsx("span",{className:"path1"}),e.jsx("span",{className:"path2"})]}),e.jsx("input",{type:"text",id:"kt_filter_search",className:"form-control form-control-white form-control-sm w-150px ps-9",placeholder:"Поиск"})]}),e.jsx(N,{columns:f,onFilter:s=>console.log(s)}),e.jsx(u,{to:"/financial-reports/add",className:"btn btn-sm btn-warning me-3 mt-3 mt-sm-0",children:"Добавить отчёт"})]})]}),e.jsxs("div",{className:"card-body py-3",children:[e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-row-bordered table-hover table-row-gray-200 align-middle gs-0 gy-3",children:[e.jsx("thead",{style:{borderTop:"1px solid var(--bs-gray-200)"},children:e.jsx("tr",{className:"fw-bold text-muted",children:i.map(s=>e.jsx("th",{className:"min-w-150px fw-bolder text-dark",style:{fontSize:16},children:s.label},s.key))})}),e.jsx("tbody",{children:o.map(s=>e.jsx("tr",{onClick:()=>n==null?void 0:n(s.id),style:{cursor:"pointer"},children:i.map(l=>e.jsx("td",{className:l.className||"",style:{fontSize:14,fontWeight:600},children:e.jsx("span",{children:s[l.key]})}))}))}),e.jsx("tfoot",{className:"table-default",style:{borderTop:"2px solid #E1E3EA"},children:e.jsxs("tr",{className:"my-3",children:[e.jsx("td",{style:{fontSize:14},className:"fw-bolder",children:e.jsx("span",{children:"Итого"})}),i.slice(1).map(s=>e.jsx("td",{className:s.className||"",style:{fontSize:14,fontWeight:600},children:e.jsx("span",{children:"10000 тг"})}))]})})]})}),e.jsx("div",{className:"d-flex justify-content-end",children:e.jsx(v,{pages:2,currentPage:0})})]})]})}function D(){const t=y();return e.jsxs("div",{style:{maxWidth:1160,margin:"0px auto"},children:[e.jsx(p,{data:h,className:"",title:e.jsxs("div",{children:[e.jsx("h2",{children:"Доходы/расходы по городам"}),e.jsx("span",{children:"Суммы в тысячах в тенге"})]})}),e.jsx(p,{data:h,className:"my-7",toolbar:e.jsxs("select",{className:"form-select form-select-solid form-select-lg",name:"city",children:[e.jsx("option",{value:"",children:"Выберите регион/город"}),Object.keys(h).map(a=>e.jsx("option",{value:a,children:a},a))]}),title:e.jsxs("div",{children:[e.jsx("h2",{children:"Доходы/расходы по филиалам"}),e.jsx("span",{children:"Суммы в тысячах в тенге"})]})}),e.jsx("div",{className:"row g-5 g-xl-10 mb-5 mb-xl-10",children:e.jsx("div",{className:"col-12 mb-md-5 mb-xl-10",children:e.jsx(C,{title:"Смарт ломбард",columns:f,data:w,onRowClick:a=>t(`/financial-reports/${a}`)})})})]})}export{D as default};
