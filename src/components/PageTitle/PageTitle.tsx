import { createPortal } from "react-dom";
import { getCSSVariableValue } from "../../_metronic/assets/ts/_utils";
import { useNavigate } from "react-router-dom";

interface PageTitleProps {
  title: string;
  breadcrumbs?: string[];
  toolbar?: React.ReactElement;
}

function PageTitle({ title, breadcrumbs, toolbar }: PageTitleProps) {
  const navigate = useNavigate()
  return (
    <div className="d-flex justify-content-between position-relative align-items-center ">
      <div>
        <div
          className="d-flex gap-2 align-items-center"
          style={{ marginBottom: 10 }}
        >
          <svg
            width="16"
            height="17"
            viewBox="0 0 16 17"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
            style={{cursor: "pointer"}}
            onClick={()=>navigate("/")}
          >
            <path
              d="M13.1533 15.66H10.8867C10.3562 15.66 9.84752 15.4493 9.47244 15.0742C9.09737 14.6991 8.88666 14.1904 8.88666 13.66V10.68C8.88609 10.5524 8.85735 10.4264 8.80249 10.3112C8.74762 10.196 8.66799 10.0943 8.56927 10.0134C8.47056 9.93253 8.3552 9.87445 8.23144 9.84331C8.10767 9.81218 7.97856 9.80876 7.85332 9.8333C7.64535 9.87854 7.45992 9.9955 7.3295 10.1637C7.19908 10.3319 7.132 10.5406 7.13999 10.7533V13.6333C7.13999 14.1637 6.92928 14.6724 6.5542 15.0475C6.17913 15.4226 5.67042 15.6333 5.13999 15.6333H2.84666C2.31622 15.6333 1.80752 15.4226 1.43244 15.0475C1.05737 14.6724 0.846656 14.1637 0.846656 13.6333V8.0533C0.841084 7.56255 0.941203 7.07635 1.14021 6.62772C1.33922 6.17909 1.63245 5.77855 1.99999 5.4533L5.83999 2.11997C6.44282 1.60708 7.20849 1.32544 7.99999 1.32544C8.79148 1.32544 9.55715 1.60708 10.16 2.11997L13.9933 5.4533C14.3654 5.77529 14.6639 6.17349 14.8687 6.62093C15.0734 7.06837 15.1796 7.55458 15.18 8.04664V13.6333C15.1836 13.9004 15.1336 14.1656 15.033 14.4131C14.9324 14.6606 14.7833 14.8855 14.5944 15.0744C14.4055 15.2633 14.1806 15.4124 13.9331 15.513C13.6856 15.6136 13.4205 15.6636 13.1533 15.66ZM7.99999 8.82664C8.49214 8.82663 8.96423 9.02168 9.31286 9.36906C9.66148 9.71644 9.85823 10.1878 9.85999 10.68V13.6333C9.85999 13.9056 9.96816 14.1667 10.1607 14.3593C10.3532 14.5518 10.6144 14.66 10.8867 14.66H13.1533C13.2887 14.6609 13.4229 14.6349 13.5483 14.5837C13.6736 14.5325 13.7876 14.4571 13.8836 14.3616C13.9796 14.2662 14.0559 14.1527 14.1079 14.0277C14.1599 13.9027 14.1867 13.7687 14.1867 13.6333V8.04664C14.1847 7.69669 14.1075 7.35125 13.9602 7.03377C13.813 6.71629 13.5992 6.4342 13.3333 6.20664L9.49999 2.8733C9.07995 2.51458 8.5457 2.31749 7.99332 2.31749C7.44095 2.31749 6.9067 2.51458 6.48666 2.8733L2.66666 6.2133C2.40029 6.44004 2.18655 6.72212 2.04033 7.0399C1.89411 7.35767 1.81892 7.7035 1.81999 8.0533V13.6333C1.81999 13.7687 1.84676 13.9027 1.89877 14.0277C1.95078 14.1527 2.027 14.2662 2.12305 14.3616C2.21909 14.4571 2.33306 14.5325 2.45839 14.5837C2.58372 14.6349 2.71794 14.6609 2.85332 14.66H5.11999C5.39112 14.6582 5.65055 14.5493 5.84165 14.3569C6.03274 14.1646 6.14 13.9044 6.13999 13.6333V10.7533C6.13485 10.304 6.28748 9.86703 6.57132 9.51863C6.85515 9.17023 7.2522 8.93243 7.69332 8.84664C7.79498 8.83312 7.89744 8.82644 7.99999 8.82664Z"
              fill="white"
            />
          </svg>
          {breadcrumbs?.map((breadcrumb) => (
            <>
              <svg
                width="6"
                height="11"
                viewBox="0 0 6 11"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M0.893322 10.1667C0.760906 10.1675 0.631259 10.1288 0.520913 10.0556C0.410567 9.98239 0.324519 9.87799 0.273742 9.75569C0.222964 9.6334 0.209756 9.49875 0.235803 9.36892C0.261849 9.23909 0.325969 9.11995 0.419989 9.02671L3.89999 5.50004L0.419989 2.05337C0.35783 1.99121 0.308522 1.91742 0.274882 1.83621C0.241242 1.75499 0.223927 1.66795 0.223927 1.58004C0.223927 1.49213 0.241242 1.40509 0.274882 1.32387C0.308522 1.24266 0.35783 1.16886 0.419989 1.10671C0.482148 1.04455 0.555941 0.99524 0.637156 0.961599C0.71837 0.927959 0.805416 0.910645 0.893322 0.910645C0.981228 0.910645 1.06827 0.927959 1.14949 0.961599C1.2307 0.99524 1.3045 1.04455 1.36666 1.10671L5.33332 5.06004C5.45749 5.18495 5.52718 5.35392 5.52718 5.53004C5.52718 5.70616 5.45749 5.87513 5.33332 6.00004L1.38666 9.94671C1.32433 10.0158 1.24823 10.071 1.16327 10.1089C1.0783 10.1468 0.986351 10.1665 0.893322 10.1667Z"
                  fill="white"
                />
              </svg>
              <span className="text-white fw-bolder">{breadcrumb}</span>
            </>
          ))}
        </div>
        <h1 className="text-white">{title}</h1>
      </div>
      <div>{toolbar}</div>
    </div>
  );
}

interface PageTitleWithPortalProps {
  children: React.ReactNode;
  container: Element | null;
}

function PageTitleWithPortal({
  children,
  container,
}: PageTitleWithPortalProps) {
  return container ? createPortal(children, container) : null;
}

export { PageTitleWithPortal, PageTitle };
